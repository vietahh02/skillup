<div class="container notification-container">
  <!-- Header Section -->
  <div class="header mb-3">
    <div class="d-flex align-items-center justify-content-between">
      <div class="header-content">
        <h1 class="title mb-1">{{ 'system.notification.title' | translate }}</h1>
        <p class="subtitle">{{ 'system.notification.subtitle' | translate }}</p>
      </div>

    </div>
  </div>

  <!-- Partner Filter (only for Purchase Order tab) -->
  @if (selectedTab() === 0 && partnerFilterConfig) {
    <div class="filter-wrapper mb-3">
      <div class="wrapper-card">
        <div class="row">
          <div class="col-12">
            <generic-filter
              [config]="partnerFilterConfig"
              [isSearchLoading]="isLoadingFilter"
              [initialValues]="initialFilterValues"
              (applyFilters)="onApplyFilters($event)"
              (clearFilters)="onClearFilters()">
            </generic-filter>
          </div>
        </div>
      </div>
    </div>
  }

  <!-- Tabs Section -->
  <div class="wrapper-card">
    <mat-tab-group [selectedIndex]="selectedTab()" (selectedIndexChange)="onTabChange($event)" class="notification-tabs">
      <mat-tab [label]="'system.notification.tabPurchaseOrder' | translate">
        <div class="notification-content">
          @if (getNotificationsForCurrentTab().length === 0) {
            <div class="no-items">
              <div class="empty-state">
                <mat-icon class="empty-icon">notifications_none</mat-icon>
                <p class="empty-text">{{ 'common.noData' | translate }}</p>
                <p class="empty-subtext">{{ 'system.notification.noNotifications' | translate }}</p>
              </div>
            </div>
          } @else {
            <div class="notification-list">
              @for (notification of getNotificationsForCurrentTab(); track notification.id) {
                <div class="notification-item"
                     [class.new]="notification.daysAgo <= 1"
                     [class.deposit]="isDeposit(notification.requestType)"
                     [class.withdraw]="!isDeposit(notification.requestType) && notification.requestType === 'WITHDRAW'"
                     (click)="onNotificationClick(notification)">
                  <div class="notification-indicator"></div>
                  <div class="notification-icon-wrapper">
                    <div class="notification-icon">
                      <mat-icon class="icon wallet-icon">account_balance_wallet</mat-icon>
                      <mat-icon class="icon arrow-icon"
                                [class.arrow-deposit]="isDeposit(notification.requestType)"
                                [class.arrow-withdraw]="!isDeposit(notification.requestType) && notification.requestType === 'WITHDRAW'">
                        {{ isDeposit(notification.requestType) ? 'south' : 'north' }}
                      </mat-icon>
                    </div>
                  </div>
                  <div class="notification-content-wrapper">
                    <div class="notification-header">
                      <div class="header-left">
                        <span class="channel-name">{{ notification.channel }}</span>
                        @if (notification.requestType) {
                          <span class="badge-type"
                                [class.badge-deposit]="isDeposit(notification.requestType)"
                                [class.badge-withdraw]="!isDeposit(notification.requestType)">
                            {{ getRequestTypeLabel(notification.requestType) | translate }}
                          </span>
                        }
                        @if (notification.daysAgo <= 1) {
                          <span class="badge-new">New</span>
                        }
                      </div>
                      <span class="amount"
                            [class.amount-deposit]="isDeposit(notification.requestType)"
                            [class.amount-withdraw]="!isDeposit(notification.requestType) && notification.requestType === 'WITHDRAW'">
                        {{ formatAmount(notification.amount) }}
                      </span>
                    </div>
                    <div class="notification-description-row">
                      <div class="notification-description">
                        <span>{{ getDescriptionText(notification).before }}</span>
                        <span class="order-id">#{{ notification.orderId }}</span>
                        <span>{{ getDescriptionText(notification).after }}</span>
                      </div>
                      <span class="timestamp-inline">
                        <mat-icon class="time-icon-small">schedule</mat-icon>
                        {{ getDaysAgoText(notification.daysAgo) }}
                      </span>
                    </div>
                    <div class="notification-footer">
                      <span class="created-by-label">{{ 'system.purchaseOrder.createdBy' | translate }}:</span>
                      <span class="created-by-value">{{ notification.createdBy || 'N/A' }}</span>
                    </div>
                  </div>
                </div>
              }
            </div>
          }
        </div>
      </mat-tab>

      <mat-tab [label]="'system.notification.tabApprovalRequest' | translate">
        <div class="notification-content">
          @if (getNotificationsForCurrentTab().length === 0) {
            <div class="no-items">
              <div class="empty-state">
                <mat-icon class="empty-icon">notifications_none</mat-icon>
                <p class="empty-text">{{ 'common.noData' | translate }}</p>
                <p class="empty-subtext">{{ 'system.notification.noNotifications' | translate }}</p>
              </div>
            </div>
          } @else {
            <div class="notification-list">
              @for (notification of getNotificationsForCurrentTab(); track notification.id) {
                <div class="notification-item"
                     [class.new]="notification.daysAgo <= 1"
                     [class.deposit]="isDeposit(notification.requestType)"
                     [class.withdraw]="!isDeposit(notification.requestType) && notification.requestType === 'WITHDRAW'"
                     (click)="onNotificationClick(notification)">
                  <div class="notification-indicator"></div>
                  <div class="notification-icon-wrapper">
                    <div class="notification-icon">
                      <mat-icon class="icon wallet-icon">account_balance_wallet</mat-icon>
                      <mat-icon class="icon arrow-icon"
                                [class.arrow-deposit]="isDeposit(notification.requestType)"
                                [class.arrow-withdraw]="!isDeposit(notification.requestType) && notification.requestType === 'WITHDRAW'">
                        {{ isDeposit(notification.requestType) ? 'south' : 'north' }}
                      </mat-icon>
                    </div>
                  </div>
                  <div class="notification-content-wrapper">
                    <div class="notification-header">
                      <div class="header-left">
                        <span class="channel-name">{{ notification.channel }}</span>
                        @if (notification.requestType) {
                          <span class="badge-type"
                                [class.badge-deposit]="isDeposit(notification.requestType)"
                                [class.badge-withdraw]="!isDeposit(notification.requestType)">
                            {{ getRequestTypeLabel(notification.requestType) | translate }}
                          </span>
                        }
                        @if (notification.daysAgo <= 1) {
                          <span class="badge-new">New</span>
                        }
                      </div>
                      <span class="amount"
                            [class.amount-deposit]="isDeposit(notification.requestType)"
                            [class.amount-withdraw]="!isDeposit(notification.requestType) && notification.requestType === 'WITHDRAW'">
                        {{ formatAmount(notification.amount) }}
                      </span>
                    </div>
                    <div class="notification-description-row">
                      <div class="notification-description">
                        <span>{{ getDescriptionText(notification).before }}</span>
                        <span class="order-id">#{{ notification.orderId }}</span>
                        <span>{{ getDescriptionText(notification).after }}</span>
                      </div>
                      <span class="timestamp-inline">
                        <mat-icon class="time-icon-small">schedule</mat-icon>
                        {{ getDaysAgoText(notification.daysAgo) }}
                      </span>
                    </div>
                    <div class="notification-footer">
                      <span class="created-by-label">{{ 'system.purchaseOrder.createdBy' | translate }}:</span>
                      <span class="created-by-value">{{ notification.createdBy || 'N/A' }}</span>
                    </div>
                  </div>
                </div>
              }
            </div>
          }
        </div>
      </mat-tab>

      <mat-tab [label]="'system.notification.tabSystem' | translate">
        <div class="notification-content">
          @if (getNotificationsForCurrentTab().length === 0) {
            <div class="no-items">
              <div class="empty-state">
                <mat-icon class="empty-icon">notifications_none</mat-icon>
                <p class="empty-text">{{ 'common.noData' | translate }}</p>
                <p class="empty-subtext">{{ 'system.notification.noNotifications' | translate }}</p>
              </div>
            </div>
          } @else {
            <div class="notification-list">
              @for (notification of getNotificationsForCurrentTab(); track notification.id) {
                <div class="notification-item"
                     [class.new]="notification.daysAgo <= 1"
                     [class.deposit]="isDeposit(notification.requestType)"
                     [class.withdraw]="!isDeposit(notification.requestType) && notification.requestType === 'WITHDRAW'"
                     (click)="onNotificationClick(notification)">
                  <div class="notification-indicator"></div>
                  <div class="notification-icon-wrapper">
                    <div class="notification-icon">
                      <mat-icon class="icon wallet-icon">account_balance_wallet</mat-icon>
                      <mat-icon class="icon arrow-icon"
                                [class.arrow-deposit]="isDeposit(notification.requestType)"
                                [class.arrow-withdraw]="!isDeposit(notification.requestType) && notification.requestType === 'WITHDRAW'">
                        {{ isDeposit(notification.requestType) ? 'south' : 'north' }}
                      </mat-icon>
                    </div>
                  </div>
                  <div class="notification-content-wrapper">
                    <div class="notification-header">
                      <div class="header-left">
                        <span class="channel-name">{{ notification.channel }}</span>
                        @if (notification.requestType) {
                          <span class="badge-type"
                                [class.badge-deposit]="isDeposit(notification.requestType)"
                                [class.badge-withdraw]="!isDeposit(notification.requestType)">
                            {{ getRequestTypeLabel(notification.requestType) | translate }}
                          </span>
                        }
                        @if (notification.daysAgo <= 1) {
                          <span class="badge-new">New</span>
                        }
                      </div>
                      <span class="amount"
                            [class.amount-deposit]="isDeposit(notification.requestType)"
                            [class.amount-withdraw]="!isDeposit(notification.requestType) && notification.requestType === 'WITHDRAW'">
                        {{ formatAmount(notification.amount) }}
                      </span>
                    </div>
                    <div class="notification-description-row">
                      <div class="notification-description">
                        <span>{{ getDescriptionText(notification).before }}</span>
                        <span class="order-id">#{{ notification.orderId }}</span>
                        <span>{{ getDescriptionText(notification).after }}</span>
                      </div>
                      <span class="timestamp-inline">
                        <mat-icon class="time-icon-small">schedule</mat-icon>
                        {{ getDaysAgoText(notification.daysAgo) }}
                      </span>
                    </div>
                    <div class="notification-footer">
                      <span class="created-by-label">{{ 'system.purchaseOrder.createdBy' | translate }}:</span>
                      <span class="created-by-value">{{ notification.createdBy || 'N/A' }}</span>
                    </div>
                  </div>
                </div>
              }
            </div>
          }
        </div>
      </mat-tab>
    </mat-tab-group>

    <!-- Pagination Section -->
    @if (total > 0) {
      <div class="pagination-wrapper">
        <app-generic-pagination
          [pagination]="{ currentPage: page, pageSize: size, totalItems: total, totalPages: totalPages }"
          [pageSizeOptions]="pageSizeOptions"
          [loading]="loading"
          (pageChange)="onPageChange($event)"
          (pageSizeChange)="onPageSizeChange($event)">
        </app-generic-pagination>
      </div>
    }
  </div>
</div>
