<mat-drawer-container>
  <!-- Right slide-in drawer for Policy -->
  <mat-drawer position="end" mode="over" [opened]="policyDrawerOpen" class="drawer-container" (closedStart)="onPolicyDrawerClosed()">
      <policy-create-update
          [id]="policyId"
      [productId]="id"
          (onClose)="onPolicyDrawerClosed()"
      (loadData)="onPolicyLoadData()">
    </policy-create-update>
  </mat-drawer>
  <mat-drawer-content>
<div class="detail-container">
  <!-- Header Section -->
  <div class="header mb-2 d-flex align-items-center justify-content-space-between">
    <div class="d-flex align-items-center justify-content-space-between">
      <div class="d-grid align-items-center mb-2">
        <div class="d-flex">
          <a class="d-flex align-items-center btn-back" (click)="back()">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="lucide lucide-arrow-left h-4 w-4">
              <path d="m12 19-7-7 7-7"></path>
              <path d="M19 12H5"></path>
            </svg>
            {{ 'system.product.backToList' | translate }}
          </a>
        </div>

        <div>
          <h1 class="title">{{ 'system.product.detailProductTitle' | translate }}</h1>
        </div>
      </div>
    </div>
  </div>

  <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>

  <div class="row equal-height-row">
    <div class="col-md-12 mb-4">
      <div class="stats-card bg-white border-radius-size-main h-100">
        <h4 class="section-title">{{ 'system.product.information' | translate }}</h4>
        <div class="app-form">
          <div class="row position-relative">
            <div class="col-md-6 mb-4">
              <label class="d-block mb-2 fw-semibold">
                {{ 'system.product.productCode' | translate }}
              </label>
              <div class="value-text">{{ detail?.productCode || '-' }}</div>
            </div>

            <div class="col-md-6 mb-4">
              <label class="d-block mb-2 fw-semibold">
                {{ 'system.product.productName' | translate }}
              </label>
              <div class="value-text">{{ detail?.productName || '-' }}</div>
            </div>

            <div class="col-md-6 mb-4">
              <label class="d-block mb-2 fw-semibold">
                {{ 'system.product.productType' | translate }}
              </label>
              <div class="value-text">{{ detail?.productType || '-' }}</div>
            </div>

            <div class="col-md-6 mb-4">
              <label class="d-block mb-2 fw-semibold">
                {{ 'system.product.description' | translate }}
              </label>
              <div class="value-text">{{ detail?.description || '-' }}</div>
            </div>

            <div class="col-md-6 mb-4">
              <label class="d-block mb-2 fw-semibold">
                {{ 'system.product.status' | translate }}
              </label>
              <span class="status-pill" [class.active]="detail?.status === 1" [class.inactive]="detail?.status === 0">
                {{ detail?.status === 1 ? ('common.active' | translate) : ('common.inactive' | translate) }}
              </span>
            </div>

            <div class="col-md-6 mb-4">
              <label class="d-block mb-2 fw-semibold">
                {{ 'system.product.serviceId' | translate }}
              </label>
              <div class="value-text">{{ detail?.serviceId || '-' }}</div>
            </div>

            <div class="col-md-6 mb-4">
              <label class="d-block mb-2 fw-semibold">
                {{ 'system.product.priceTag' | translate }}
              </label>
              <div class="value-text">{{ detail?.priceTag || '-' }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Product Policy Section -->
  <div class="row">
    <div class="col-md-12">
      <div class="stats-card bg-white border-radius-size-main h-100">
        <div class="d-flex justify-content-space-between align-items-center mb-3">
          <h4 class="section-title mb-0">{{ 'system.product.productPolicy' | translate }}</h4>
          @if(authService.isAdminHub()) {
          <button mat-flat-button color="primary" class="btn-primary-flat" (click)="onAddPolicy()" >
              <mat-icon>add</mat-icon>
              {{ 'system.product.addPolicy' | translate }}
            </button>
          }
        </div>

          <!-- Filter Section -->
        <div class="mb-3">
          <generic-filter
            [config]="policyFilterConfig"
            [isSearchLoading]="false"
            (applyFilters)="onApplyPolicyFilter($event)"
            (clearFilters)="onClearPolicyFilter()">
          </generic-filter>
        </div>

        <!-- Policy Table -->
        <generic-table
          [dataSource]="policyData"
          [config]="policyTableConfig"
          [loading]="policyLoading"
          [totalItems]="policyTotal"
          [currentPage]="policyCurrentPage"
          [pageSize]="policyPageSize"
          [totalPages]="policyTotalPages"
          [pageSizeOptions]="[5, 10, 25, 50]"
          (pageChange)="onPolicyPageChange($event)"
          (pageSizeChange)="onPolicyPageSizeChange($event)"
          (statusToggle)="onStatusToggle($event.item, $event.event)">
        </generic-table>
      </div>
    </div>
  </div>
</div>
  </mat-drawer-content>
</mat-drawer-container>
