<!-- Header -->
<div class="row mb-25">
  <div class="col-12">
    <mat-card class="tagus-card">
      <mat-card-content>
        <div class="d-flex align-items-center">
          <mat-icon class="me-2" style="font-size: 32px; width: 32px; height: 32px;">smart_toy</mat-icon>
          <div>
            <h4 class="mb-0">AI Settings</h4>
            <p class="muted-color mb-0">Configure Gemini API Key</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>

<!-- Loading Spinner -->
<div *ngIf="isLoading" class="loading-container text-center py-5">
  <mat-spinner diameter="50" class="mx-auto"></mat-spinner>
  <p class="mt-3 muted-color">Loading...</p>
</div>

<!-- Settings Form -->
<div *ngIf="!isLoading" class="row justify-content-center">
  <div class="col-lg-6 col-md-8 col-12">
    <mat-card class="tagus-card">
      <mat-card-header>
        <div class="d-flex align-items-center">
          <mat-icon class="me-2" color="primary">vpn_key</mat-icon>
          <h5 class="mb-0">Gemini API Key</h5>
        </div>
      </mat-card-header>
      <mat-card-content>
        <mat-form-field appearance="outline" class="w-100 mb-3">
          <mat-label>API Key</mat-label>
          <input
            matInput
            [(ngModel)]="aiApiKey"
            [type]="showApiKey ? 'text' : 'password'"
            placeholder="Enter Gemini API Key">
          <button
            mat-icon-button
            matSuffix
            (click)="showApiKey = !showApiKey"
            type="button">
            <mat-icon>{{showApiKey ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
        </mat-form-field>

        <div class="d-flex justify-content-end">
          <button
            mat-flat-button
            color="primary"
            (click)="saveAiKey()"
            [disabled]="isLoading">
            <mat-icon>save</mat-icon>
            Save API Key
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
